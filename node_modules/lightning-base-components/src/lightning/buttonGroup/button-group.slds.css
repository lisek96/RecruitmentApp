
/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved
  Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */

:host([data-render-mode="shadow"]) [part~='button-group'] {
  display: inline-flex;

  /**
   * Kill border radius, rebuild it below depending on position.
   *
   * @TODO: These hooks can be refactored to shared button hooks instead of
   *        needing to define hooks for each button type. But for now, we
   *        target each type to make button-group support them all. Applies
   *        to all the hooks below. I.e, --sds-s-button-radius-border
   *
   * Right now, button-group supports:
   *  - button
   *  - button-icon
   *
   * It will also need to support (in-progress or not started):
   *  - button-stateful
   *  - button-icon-stateful
   *  - radio-button-group
   *  - checkbox-button
   *
   * This can all be avoided by adding shared button hooks (see above rationale).
   */
  --slds-c-button-neutral-radius-border: 0;
  --sds-c-button-radius-border: 0;
}

/* Nudge buttons over to remove double border effect */

:host([data-render-mode="shadow"]) [part~='button-group'] ::slotted(:not(:first-child)) {
  margin-inline-start: calc(-1 * var(--sds-g-sizing-border-1, 1px));
}

/**
 * First child in group
 *
 * @TODO: update button radius to logical props & shared hooks
 */

:host([data-render-mode="shadow"]) [part~='button-group'] ::slotted(:first-child) {
  --slds-c-button-neutral-radius-border: var(--sds-g-radius-border-2, 0.25rem) 0 0 var(--sds-g-radius-border-2, 0.25rem);
  --sds-c-button-radius-border: var(--sds-g-radius-border-2, 0.25rem) 0 0 var(--sds-g-radius-border-2, 0.25rem);
}

/**
 * Last child in group
 *
 * @TODO: update button radius to logical props & shared hooks
 */

:host([data-render-mode="shadow"]) [part~='button-group'] ::slotted(:last-child) {
  --slds-c-button-neutral-radius-border: 0 var(--sds-g-radius-border-2, 0.25rem) var(--sds-g-radius-border-2, 0.25rem) 0;
  --sds-c-button-radius-border: 0 var(--sds-g-radius-border-2, 0.25rem) var(--sds-g-radius-border-2, 0.25rem) 0;
}

/**
 * Focused child in group
 *
 * Adds stacking context so the focus shadow is visible
 */

:host([data-render-mode="shadow"]) [part~='button-group'] ::slotted(:focus) {
  position: relative;
  z-index: 1;
}
